name: ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØªÙ‚Ø¯Ù…

on:
  schedule:
    - cron: '* * * * *'
  workflow_dispatch:

jobs:
  advanced-cron:
    runs-on: ubuntu-latest
    steps:
      - name: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
        uses: actions/checkout@v3
        
      - name: ØªØ´ØºÙŠÙ„ Ø³ÙƒØ±ÙŠØ¨Øª Ø¨Ø§ÙŠØ«ÙˆÙ†
        run: |
          cat > cron_script.py << 'EOF'
          import requests
          import os
          from datetime import datetime
          
          url = "https://networkcardahye.in/api/cron/run"
          token = os.getenv('X_Cron_Token')
          
          headers = {
              "X-Cron-Token": token
          }
          
          try:
              print(f"ðŸ•’ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡: {datetime.now()}")
              response = requests.get(url, headers=headers, timeout=30)
              
              if response.status_code == 200:
                  print("âœ… Ø§Ù„Ù†Ø¬Ø§Ø­ - ØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­")
                  print(f"ðŸ“Š Ø§Ù„Ø±Ø¯: {response.text}")
              else:
                  print(f"âŒ Ø®Ø·Ø£: ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„Ø© {response.status_code}")
                  print(f"ðŸ“ Ø§Ù„ØªÙØ§ØµÙŠÙ„: {response.text}")
                  
          except Exception as e:
              print(f"ðŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: {e}")
          
          EOF
          
          python cron_script.py
        env:
          CRON_TOKEN: ${{ secrets.CRON_TOKEN }}
